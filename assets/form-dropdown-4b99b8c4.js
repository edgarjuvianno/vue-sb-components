import{e as q,o as n,g as o,F as m,G as w,n as $,k as B,j as p,m as f,v as L,x as N,y as V,B as E,D as j,s as S,H as G,t as P,q as O,f as g,u as z,T as X,l as Q}from"./vue.esm-bundler-38397e95.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";import{P as Y}from"./progress-circular-90599950.js";import{T as Z}from"./form-input-e5bf6945.js";import{x as _,a as x}from"./icons-d0b18b59.js";import{r as A}from"./helper-91f3687e.js";const F=(e,t)=>e&&typeof e=="object"?typeof t=="string"?e[t]:t(e):"",D=q({emits:{listChange:e=>!0,loading:e=>!0,select:(e,t)=>!0},props:{activeOption:{required:!0,type:Number},infinite:{required:!1,type:Boolean},isOpen:{required:!0,type:Boolean},isScrollBottom:{required:!0,type:Boolean},loadingText:{default:"Loading...",type:String},multi:{required:!1,type:Boolean},noResultText:{default:"No Results Found...",type:String},onAjax:{required:!1,type:Function},optLabel:{required:!0,type:[String,Function]},selected:{required:!1,type:Object},serverSide:{required:!1,type:Object},term:{required:!0,type:String}},name:"sb-form-dropdown-option-ajax",data(){return{localAbort:null,localList:[],localLoading:!1,localPage:0}},methods:{doSelect(e){this.localLoading||this.$emit("select",e,this.isSelected(e))},async handleAjax(){var e,t,s,a,u,h,i;try{if((e=this.serverSide)!=null&&e.url){this.localLoading=!0,this.$emit("loading",!0);let r={headers:((s=(t=this.serverSide)==null?void 0:t.options)==null?void 0:s.headers)||{},payload:{...((u=(a=this.serverSide)==null?void 0:a.options)==null?void 0:u.payload)||{},term:this.term,page:this.localPage}};if(this.onAjax){const l=this.onAjax({headers:{...r.headers},payload:{...r.payload}},"BEFORE SEND",this.infinite&&this.isScrollBottom);r={...r,...l}}const d=new XMLHttpRequest;(i=(h=this.serverSide)==null?void 0:h.options)!=null&&i.withCredential&&(d.withCredentials=!0),this.localAbort&&this.localAbort.abort(),this.localAbort=d;const C=()=>{var l,c;return!((l=this.serverSide)!=null&&l.method)||((c=this.serverSide)==null?void 0:c.method)==="GET"?null:JSON.stringify(r.payload||{})},R=()=>{var l,c,b,v,y;if((l=this.serverSide)!=null&&l.url){const J=new URLSearchParams(r.params||{}).toString();if(((c=this.serverSide)==null?void 0:c.method)==="GET"||!((b=this.serverSide)!=null&&b.method)){const K=new URLSearchParams({...r.params||{},...r.payload||{}}).toString();return`${(v=this.serverSide)==null?void 0:v.url}?${K}`}return`${(y=this.serverSide)==null?void 0:y.url}?${J}`}return""},k=this;await new Promise((l,c)=>{var b,v;d.open(((b=k.serverSide)==null?void 0:b.method)||"GET",R()),((v=k.serverSide)==null?void 0:v.method)==="POST"&&d.setRequestHeader("Content-Type","application/json;charset=UTF-8"),Object.keys(r.headers).forEach(y=>{d.setRequestHeader(y,r.headers[y])}),d.onload=()=>{if(d.status!==200)c({status:d.status,statusText:d.statusText,response:d.response});else{const y=JSON.parse(d.response);l({status:d.status,statusText:d.statusText,response:y})}},d.onabort=()=>{c({status:"ERR_ABORTED",statusText:"ERR_ABORTED",response:{message:"ERR_ABORTED"}})},d.send(C())}).then(l=>{if(this.onAjax){const c=this.onAjax({data:l.response,httpResponse:{code:l.status,message:l.statusText},status:!0},"SUCCESS");this.infinite?this.localList=[...this.localList,...c]:this.localList=[...c]}else this.localList=l.response;this.localLoading=!1,this.$emit("loading",!1)}).catch(l=>{this.localLoading=!1,this.$emit("loading",!1),this.infinite||(this.localList=[]),this.onAjax&&this.onAjax({data:null,httpResponse:{code:l.status||500,message:l.response.message},status:!1},"ERROR")})}}catch{}},isSelected(e){return this.selected?this.multi?this.selected.some(t=>JSON.stringify(t).indexOf(JSON.stringify(e))>-1):JSON.stringify(this.selected).indexOf(JSON.stringify(e))>-1:!1},renderOption(e){return F(e,this.optLabel)}},watch:{isOpen:{handler(e,t){e&&!t&&(this.localPage=0,this.$nextTick(()=>this.handleAjax())),this.localAbort&&this.localAbort.abort()},immediate:!0},isScrollBottom(e){e&&!this.localLoading&&this.isOpen&&(this.localPage+=1,this.$nextTick(()=>this.handleAjax()))},localList:{deep:!0,handler(e){this.$emit("listChange",e)}},term:{handler(){this.localPage=0,this.localList=[],this.isOpen&&this.$nextTick(()=>this.handleAjax())}}},unmounted(){this.localAbort&&this.localAbort.abort()}}),ee=["onClick"],te=["innerHTML"],ie={key:1,class:"no-result"},se={key:2,class:"loading-text"};function ne(e,t,s,a,u,h){return n(),o(m,null,[!e.localLoading||e.infinite?(n(!0),o(m,{key:0},w(e.localList,(i,r)=>(n(),o("div",{class:$(["option",{focus:e.activeOption===r,selected:e.isSelected(i)}]),key:i,onClick:B(d=>e.doSelect(i),["stop"])},[p("span",{innerHTML:e.renderOption(i)},null,8,te)],10,ee))),128)):f("",!0),!e.localLoading&&!e.localList.length?(n(),o("div",ie,L(e.noResultText),1)):f("",!0),e.localLoading?(n(),o("div",se,L(e.loadingText),1)):f("",!0)],64)}const le=T(D,[["render",ne]]);D.__docgenInfo={displayName:"sb-form-dropdown-option-ajax",exportName:"default",description:"",tags:{},props:[{name:"activeOption",type:{name:"number"},required:!0},{name:"infinite",type:{name:"boolean"},required:!1},{name:"isOpen",type:{name:"boolean"},required:!0},{name:"isScrollBottom",type:{name:"boolean"},required:!0},{name:"loadingText",type:{name:"string"},defaultValue:{func:!1,value:"'Loading...'"}},{name:"multi",type:{name:"boolean"},required:!1},{name:"noResultText",type:{name:"string"},defaultValue:{func:!1,value:"'No Results Found...'"}},{name:"onAjax",type:{name:`(
    _resp: IServerSideHandler,
    _type: string | 'BEFORE SEND' | 'ERROR' | 'SUCCESS',
    _isLoadMore?: boolean,
) => void`},required:!1},{name:"optLabel",type:{name:"string|func"},required:!0},{name:"selected",type:{name:"any | any[]"},required:!1},{name:"serverSide",type:{name:"IServerSide"},required:!1},{name:"term",type:{name:"string"},required:!0}],events:[{name:"listChange",type:{names:["undefined"]}},{name:"loading",type:{names:["undefined"]}},{name:"select",type:{names:["undefined"]},properties:[{type:{names:["undefined"]},name:"<anonymous1>"}]}],sourceFiles:["/Users/edgar/Documents/private-projects/vue-base-lib/src/components/form-dropdown/options/__option-ajax.vue"]};const M=q({props:{multi:{required:!1,type:Boolean},onDelete:{required:!1,type:Function},optLabel:{required:!0,type:[String,Function]},placeholder:{required:!1,type:String},selected:{required:!1,type:Object}},name:"sb-form-dropdown-input-plain",computed:{renderEmpty(){return!this.selected||this.selected&&(this.selected.length<1||Object.keys(this.selected).length<1)}},methods:{handleClear(e){return this.onDelete?this.onDelete(e):null},renderOption(e){return F(e,this.optLabel)}}});const I=e=>(N("data-v-372df9dd"),e=e(),V(),e),oe=I(()=>p("input",{autocomplete:"off",class:"dummy",role:"combobox",tabindex:"-1",type:"text"},null,-1)),ae={key:0,class:"placeholder"},re=["onClick"],de=I(()=>p("div",{class:"clear"},"x",-1)),ue={class:"content"},pe=["innerHTML"],he={key:1,class:"content"},ce=["innerHTML"];function me(e,t,s,a,u,h){return n(),o("div",{class:$(["dropdown-input-wrapper plain",{multi:e.multi}])},[oe,e.renderEmpty?(n(),o("span",ae,L(e.placeholder||"Â "),1)):(n(),o(m,{key:1},[e.multi?(n(!0),o(m,{key:0},w(e.selected,(i,r)=>(n(),o("div",{class:"pill",key:i,onClick:B(d=>e.handleClear(r),["stop"])},[de,p("div",ue,[p("span",{innerHTML:e.renderOption(i)},null,8,pe)])],8,re))),128)):(n(),o("div",he,[p("span",{innerHTML:e.renderOption(e.selected)},null,8,ce)]))],64))],2)}const fe=T(M,[["render",me],["__scopeId","data-v-372df9dd"]]);M.__docgenInfo={displayName:"sb-form-dropdown-input-plain",exportName:"default",description:"",tags:{},props:[{name:"multi",type:{name:"boolean"},required:!1},{name:"onDelete",type:{name:"(_index?: number) => void"},required:!1},{name:"optLabel",type:{name:"string|func"},required:!0},{name:"placeholder",type:{name:"string"},required:!1},{name:"selected",type:{name:"any | any[]"},required:!1}],sourceFiles:["/Users/edgar/Documents/private-projects/vue-base-lib/src/components/form-dropdown/inputs/__input-plain.vue"]};const U=q({emits:{select:(e,t)=>!0},props:{activeOption:{required:!0,type:Number},isLoading:{required:!1,type:Boolean},list:{required:!0,type:Object},loadingText:{default:"Loading...",type:String},multi:{required:!1,type:Boolean},noResultText:{default:"No Results Found...",type:String},optLabel:{required:!0,type:[String,Function]},selected:{required:!1,type:Object}},name:"sb-form-dropdown-option-plain",methods:{doSelect(e){this.isLoading||this.$emit("select",e,this.isSelected(e))},isSelected(e){return this.selected?this.multi?this.selected.some(t=>JSON.stringify(t).indexOf(JSON.stringify(e))>-1):JSON.stringify(this.selected).indexOf(JSON.stringify(e))>-1:!1},renderOption(e){return F(e,this.optLabel)}}}),ye=["onClick"],ge=["innerHTML"],Se={key:0,class:"no-result"},be={key:1,class:"loading-text"};function ve(e,t,s,a,u,h){return n(),o(m,null,[(n(!0),o(m,null,w(e.list,(i,r)=>(n(),o("div",{class:$(["option",{focus:e.activeOption===r,selected:e.isSelected(i)}]),key:i,onClick:B(d=>e.doSelect(i),["stop"])},[p("span",{innerHTML:e.renderOption(i)},null,8,ge)],10,ye))),128)),!e.isLoading&&!e.list.length?(n(),o("div",Se,L(e.noResultText),1)):f("",!0),e.isLoading?(n(),o("div",be,L(e.loadingText),1)):f("",!0)],64)}const Oe=T(U,[["render",ve]]);U.__docgenInfo={displayName:"sb-form-dropdown-option-plain",exportName:"default",description:"",tags:{},props:[{name:"activeOption",type:{name:"number"},required:!0},{name:"isLoading",type:{name:"boolean"},required:!1},{name:"list",type:{name:"any[]"},required:!0},{name:"loadingText",type:{name:"string"},defaultValue:{func:!1,value:"'Loading...'"}},{name:"multi",type:{name:"boolean"},required:!1},{name:"noResultText",type:{name:"string"},defaultValue:{func:!1,value:"'No Results Found...'"}},{name:"optLabel",type:{name:"string|func"},required:!0},{name:"selected",type:{name:"any | any[]"},required:!1}],events:[{name:"select",type:{names:["undefined"]},properties:[{type:{names:["undefined"]},name:"<anonymous1>"}]}],sourceFiles:["/Users/edgar/Documents/private-projects/vue-base-lib/src/components/form-dropdown/options/__option-plain.vue"]};const H=q({emits:{onBlur:()=>!0},props:{disabled:{required:!1,type:Boolean},isOpen:{required:!0,type:Boolean},multi:{required:!1,type:Boolean},onBlur:{required:!1,type:Function},onFocus:{required:!1,type:Function},onDelete:{required:!1,type:Function},onFilter:{required:!1,type:Function},optLabel:{required:!0,type:[String,Function]},placeholder:{required:!1,type:String},readOnly:{required:!1,type:Boolean},selected:{required:!1,type:Object}},name:"sb-form-dropdown-input-search",data(){return{termMulti:"",termSingle:""}},computed:{isEmpty(){return!this.selected||this.selected&&(this.selected.length<1||Object.keys(this.selected).length<1)}},methods:{handleBlur(){this.onBlur&&this.onBlur()},handleFocus(){this.onFocus&&this.onFocus()},handleSearchSelected(e){e.key!=="Backspace"&&this.selected&&!this.multi?e.preventDefault():e.key==="Backspace"&&!this.isEmpty&&(this.multi&&e.target.value===""||!this.multi)&&this.handleClear()},handleClear(e){this.onDelete&&this.onDelete(e)},handleFilterList(e){e=e.replace(/^\s?|\s?$/g,"").toLowerCase(),this.onFilter&&this.onFilter(e)},handleSearchInput(e){this.handleFilterList(e.target.value),this.termMulti=this.termSingle=e.target.value},renderOption(e){return F(e,this.optLabel)}},watch:{isOpen(e){e||(this.multi?(this.termMulti="",this.handleFilterList("")):(this.termSingle="",this.handleFilterList("")))},selected(){this.multi||(this.termSingle="")}}});const Le=e=>(N("data-v-8722d3f7"),e=e(),V(),e),qe={class:"content"},$e=["innerHTML"],Te=["placeholder"],ke=["onClick"],we=Le(()=>p("div",{class:"clear"},"x",-1)),Be={class:"content"},Fe=["innerHTML"],Ce=["placeholder"];function Re(e,t,s,a,u,h){return n(),o("div",{class:$(["dropdown-input-wrapper search",{multi:e.multi,selected:e.selected}])},[e.multi?(n(),o(m,{key:1},[(n(!0),o(m,null,w(e.selected,(i,r)=>(n(),o("div",{class:"pill",key:i,onClick:B(d=>e.handleClear(r),["stop"])},[we,p("div",Be,[p("span",{innerHTML:e.renderOption(i)},null,8,Fe)])],8,ke))),128)),!e.disabled&&!e.readOnly?E((n(),o("input",{key:0,placeholder:e.isEmpty?e.placeholder:"",tabindex:-1,class:"input",autocomplete:"off",role:"combobox","onUpdate:modelValue":t[6]||(t[6]=i=>e.termMulti=i),onBlur:t[7]||(t[7]=(...i)=>e.handleBlur&&e.handleBlur(...i)),onClick:t[8]||(t[8]=i=>e.isOpen&&i.stopPropagation()),onFocus:t[9]||(t[9]=(...i)=>e.handleFocus&&e.handleFocus(...i)),onKeydown:t[10]||(t[10]=i=>e.handleSearchSelected(i)),onKeyup:t[11]||(t[11]=i=>e.handleSearchInput(i))},null,40,Ce)),[[j,e.termMulti]]):f("",!0)],64)):(n(),o(m,{key:0},[p("div",qe,[p("span",{innerHTML:e.renderOption(e.selected)},null,8,$e)]),!e.disabled&&!e.readOnly?E((n(),o("input",{key:0,placeholder:e.isEmpty?e.placeholder:"",tabindex:-1,class:"input",autocomplete:"off",role:"combobox","onUpdate:modelValue":t[0]||(t[0]=i=>e.termSingle=i),onBlur:t[1]||(t[1]=(...i)=>e.handleBlur&&e.handleBlur(...i)),onClick:t[2]||(t[2]=i=>e.isOpen&&i.stopPropagation()),onFocus:t[3]||(t[3]=(...i)=>e.handleFocus&&e.handleFocus(...i)),onKeydown:t[4]||(t[4]=i=>e.handleSearchSelected(i)),onKeyup:t[5]||(t[5]=i=>e.handleSearchInput(i))},null,40,Te)),[[j,e.termSingle]]):f("",!0)],64))],2)}const Ee=T(H,[["render",Re],["__scopeId","data-v-8722d3f7"]]);H.__docgenInfo={displayName:"sb-form-dropdown-input-search",exportName:"default",description:"",tags:{},props:[{name:"disabled",type:{name:"boolean"},required:!1},{name:"isOpen",type:{name:"boolean"},required:!0},{name:"multi",type:{name:"boolean"},required:!1},{name:"onBlur",type:{name:"() => void"},required:!1},{name:"onFocus",type:{name:"() => void"},required:!1},{name:"onDelete",type:{name:"(_index?: number) => void"},required:!1},{name:"onFilter",type:{name:"(_term: string) => void"},required:!1},{name:"optLabel",type:{name:"string|func"},required:!0},{name:"placeholder",type:{name:"string"},required:!1},{name:"readOnly",type:{name:"boolean"},required:!1},{name:"selected",type:{name:"any | any[]"},required:!1}],events:[{name:"onBlur"}],sourceFiles:["/Users/edgar/Documents/private-projects/vue-base-lib/src/components/form-dropdown/inputs/__input-search.vue"]};const W=q({emits:{"update:modelValue":e=>!0,change:e=>!0,close:()=>!0,input:e=>!0,open:()=>!0},props:{allowClear:{required:!1,type:Boolean},disabled:{required:!1,type:Boolean},closeOnSelect:{default:!0,type:Boolean},errorMessage:{required:!1,type:[String,Function]},flat:{required:!1,type:Boolean},infinite:{required:!1,type:Boolean},isError:{required:!1,type:Boolean},isLoading:{required:!1,type:Boolean},label:{required:!1,type:String},list:{required:!1,type:Object},loadingText:{default:"Loading...",type:String},modelValue:{required:!1,type:[Object,String,Number]},multi:{required:!1,type:Boolean},noResultText:{default:"No Results Found...",type:String},onAjax:{required:!1,type:Function},onPopulateList:{required:!1,type:Function},optLabel:{required:!0,type:[String,Function]},optValue:{required:!1,type:String},placeholder:{required:!1,type:String},readOnly:{required:!1,type:Boolean},required:{required:!1,type:Boolean},search:{required:!1,type:Boolean},serverSide:{required:!1,type:Object},value:{required:!1,type:[Object,String,Number]}},name:"sb-form-dropdown",components:{"ajax-option":le,"plain-input":fe,"plain-option":Oe,"sb-circular":Y,"sb-input":Z,"search-input":Ee},data(){return{activeOption:-1,elem:null,icon:{onClick:null,placement:"append"},isFocus:!1,isOpen:!1,localList:[],localLoading:this.isLoading||!1,localTerm:"",optWrapperStyles:{left:"0",top:"0",width:"0"},isScrollBottom:!1,parentWithScroll:null,selected:null,termMulti:null,termSingle:null}},computed:{getIcon(){return this.allowClear&&(!this.multi&&this.selected||this.multi&&this.selected&&this.selected.length>0)?{...this.icon,onClick:this.handleClickIcon}:{...this.icon}},getIconSVG(){return this.allowClear&&(!this.multi&&this.selected||this.multi&&this.selected&&this.selected.length>0)?_():x()}},methods:{doSelect(e,t){t?this.closeOnSelect&&!this.multi&&(this.isOpen=!1,this.handleRemoveFocus()):(this.multi?this.selected?this.selected=[...this.selected,e]:this.selected=[e]:this.selected=e,this.$nextTick(()=>{this.handleUpdateModel(),this.closeOnSelect&&!this.multi&&(this.isOpen=!1,this.handleRemoveFocus())}))},handleAjax(e,t,s){return this.onAjax?this.onAjax(e,t,s):null},handleAjaxLoading(e){this.localLoading=e},handleArrowEvent(e,t){if(this.isOpen){t.preventDefault();const s=document.querySelector(`[data-target="options-${this.$.uid}"]`);if(s){const a=s.children;let u=this.activeOption+e;this.activeOption<1&&u<0?u=a.length-1:this.activeOption===a.length-1&&u>a.length-1&&(u=0);const h=a.item(u);h==null||h.scrollIntoView(!1),this.activeOption=u}}},handleClear(e){if(!this.readOnly&&!this.disabled){if(typeof e<"u"){const t=[...this.selected];t.splice(e,1),this.selected=[...t]}else if(this.search||this.serverSide)if(this.multi){const t=[...this.selected];t.pop(),this.selected=[...t]}else this.selected=null;this.$nextTick(()=>{this.handleUpdateModel()})}},handleClickIcon(){this.allowClear&&(!this.multi&&this.selected||this.multi&&this.selected&&this.selected.length>0)&&(this.selected=null,this.$nextTick(()=>{this.handleUpdateModel()}))},handleFilterList(e){this.localTerm=e,this.serverSide||(this.onPopulateList&&this.isOpen?this.onPopulateList(e):(e=e.replace(/^\s?|\s?$/g,"").toLowerCase(),this.localList=[...this.list||[]].filter(t=>JSON.stringify(t).toLowerCase().indexOf(e)>-1)))},handleKeyEvent(e){if(e.key==="ArrowDown"||e.key==="ArrowUp"){const t=e.key==="ArrowDown"?1:-1;this.isOpen||this.handleOpen(),this.$nextTick(()=>this.handleArrowEvent(t,e))}else if(e.key==="Enter"){if(this.isOpen){e.preventDefault(),e.stopPropagation();const t=document.querySelectorAll(`[data-target="options-${this.$.uid}"] .option`),s=Array.from(t).findIndex(a=>a.classList.contains("focus")&&!a.classList.contains("selected"));s>-1&&this.doSelect(this.localList[s])}}else(e.key==="Escape"||e.key==="Tab")&&(this.isOpen=!1,this.handleRemoveFocus())},handleListChange(e){this.localList=[...e]},handleOpen(){!this.readOnly&&!this.disabled&&!this.isOpen&&(this.isOpen=!0,this.$nextTick(()=>{this.setOptionsPosition()}))},handleOptValue(){const e=this.value||this.modelValue;if(e&&typeof e<"u")if(this.localList.length)this.multi?this.selected=[...this.localList].filter(t=>String(t[this.optValue]).toUpperCase()===String(e).toUpperCase()):this.selected=[...this.localList].find(t=>String(t[this.optValue]).toUpperCase()===String(e).toUpperCase());else{const t=this.value||this.modelValue;this.multi?this.selected=[...this.selected].map(s=>({[this.optValue]:s})):this.selected={[this.optValue]:t}}else this.selected=null},handleParentBlur(e){const t=e.target,s=e.relatedTarget;t.contains(s)||(this.isOpen=!1,this.handleRemoveFocus())},handleParentClickOutside(e){const t=e.target,s=this.$refs["dropdown-wrapper"],a=this.$refs["options-wrapper"];t&&parent&&a&&!s.contains(t)&&!a.contains(t)&&!t.isSameNode(s)&&(this.isOpen=!1,this.handleRemoveFocus())},handleParentFocus(){const t=this.$el.getElementsByTagName("input");if((t==null?void 0:t.length)>0){const s=t.item(0);s==null||s.focus()}this.isFocus=!0,this.handleOpen()},handleParentScroll(e){const t=A(this.$el);this.parentWithScroll&&this.parentWithScroll.removeEventListener("scroll",()=>{this.setOptionsPosition()}),t&&(e?t.addEventListener("scroll",()=>{this.setOptionsPosition()}):t.removeEventListener("scroll",()=>{this.setOptionsPosition()})),this.$nextTick(()=>{this.parentWithScroll=t})},handleRemoveFocus(){this.isFocus=!1;const e=this.$el;e.blur();const t=e.getElementsByTagName("input");if((t==null?void 0:t.length)>0){const s=t.item(0);s==null||s.blur()}},handleUpdateModel(){if(this.multi&&this.$nextTick(()=>{this.setOptionsPosition()}),this.optValue&&this.selected)if(this.multi){const e=[...this.selected].map(t=>t[this.optValue]||t.value);this.$emit("update:modelValue",e),this.$emit("input",e),this.$emit("change",e)}else{const e=this.selected[this.optValue]||this.selected.value;this.$emit("update:modelValue",e),this.$emit("input",e),this.$emit("change",e)}else this.$emit("update:modelValue",this.selected),this.$emit("input",this.selected),this.$emit("change",this.selected)},onScrollBottom(e){if(this.infinite&&this.isOpen){const{scrollTop:t,offsetHeight:s,scrollHeight:a}=e.target;t+s+20>=a?(this.isScrollBottom=!0,this.onPopulateList&&this.onPopulateList(this.localTerm||"",!0)):this.isScrollBottom&&(this.isScrollBottom=!1)}},setOptionsPosition(){var e;if(this.elem){const t=this.elem.getBoundingClientRect(),s=(e=this.$refs["options-wrapper"])==null?void 0:e.getBoundingClientRect();if(s)return document.body.getBoundingClientRect().height-(t.height+t.y)<=s.height?this.optWrapperStyles={left:`${t.x}px`,top:`${t.y-6-s.height}px`,width:`${t.width+1}px`}:this.optWrapperStyles={left:`${t.x}px`,top:`${t.y+t.height}px`,width:`${t.width+1}px`}}}},watch:{isLoading(e){this.localLoading=e},isOpen(e){this.handleParentScroll(e),e?this.$emit("open"):(this.localLoading=!1,this.$emit("close"),this.activeOption=-1,this.search&&(this.multi?this.termMulti=null:this.termSingle=null),!this.onPopulateList&&this.search&&this.handleFilterList(""))},list:{deep:!0,handler(e){e&&(this.localList=[...e])},immediate:!0},localList:{deep:!0,handler(){this.$nextTick(()=>{this.optValue&&this.handleOptValue(),this.setOptionsPosition()})}},modelValue:{deep:!0,handler(e){typeof e=="object"?this.selected=e:this.handleOptValue()}},value:{deep:!0,handler(e){typeof e=="object"?this.selected=e:this.handleOptValue()}}},beforeMount(){const e=this.modelValue||this.value;typeof e=="object"?this.selected=e:this.handleOptValue()},mounted(){const e=this.$refs["input-wrapper"].$el.children,t=Array.from(e).find(s=>s.classList.contains("input-group"));t&&(this.elem=t),this.elem&&this.setOptionsPosition(),this.icon.onClick=this.handleOpen,document.addEventListener("click",s=>this.handleParentClickOutside(s)),this.parentWithScroll=A(this.$el)},unmounted(){document.removeEventListener("click",e=>this.handleParentClickOutside(e)),this.parentWithScroll&&this.parentWithScroll.removeEventListener("scroll",()=>{this.setOptionsPosition()})}});const je=["data-target","tabindex"],Pe=["data-target"];function Ae(e,t,s,a,u,h){const i=S("sb-circular"),r=S("plain-input"),d=S("search-input"),C=S("sb-input"),R=S("plain-option"),k=S("ajax-option");return n(),o("div",O({class:["dropdown-wrapper",{multi:e.multi,ajax:e.serverSide,expanded:e.isOpen,loading:e.localLoading,search:e.search||e.serverSide}],"data-target":`dropdown-${e.$.uid}`,tabindex:!e.disabled&&!e.readOnly?0:-1,ref:"dropdown-wrapper"},{...e.$attrs},{onBlur:t[2]||(t[2]=(...l)=>e.handleParentBlur&&e.handleParentBlur(...l)),onFocus:t[3]||(t[3]=(...l)=>e.handleParentFocus&&e.handleParentFocus(...l)),onKeydown:t[4]||(t[4]=(...l)=>e.handleKeyEvent&&e.handleKeyEvent(...l))}),[G(C,O({"error-message":e.errorMessage,icon:e.getIcon,"is-error":e.isError,"is-focus":e.isFocus,label:e.label,placeholder:e.placeholder,required:e.required,variant:e.flat?"flat":"default",ref:"input-wrapper"},{disabled:e.disabled,readOnly:e.readOnly},{modelValue:e.selected,"onUpdate:modelValue":t[0]||(t[0]=l=>e.selected=l),onClick:e.handleOpen}),{"icon-slot":P(()=>[e.localLoading?(n(),g(i,{key:1,indeterminate:"",size:20})):(n(),g(Q(e.getIconSVG),{key:0}))]),"custom-input":P(()=>[!e.search&&!e.serverSide?(n(),g(r,{key:0,multi:e.multi,"on-delete":e.handleClear,"opt-label":e.optLabel,placeholder:e.placeholder,selected:e.selected},null,8,["multi","on-delete","opt-label","placeholder","selected"])):(n(),g(d,O({key:1,"is-open":e.isOpen,multi:e.multi,"on-blur":e.handleRemoveFocus,"on-delete":e.handleClear,"on-filter":e.handleFilterList,"on-focus":()=>e.isFocus=!0,"opt-label":e.optLabel,placeholder:e.placeholder,selected:e.selected},{disabled:e.disabled,readOnly:e.readOnly}),null,16,["is-open","multi","on-blur","on-delete","on-filter","on-focus","opt-label","placeholder","selected"]))]),_:1},16,["error-message","icon","is-error","is-focus","label","placeholder","required","variant","modelValue","onClick"]),(n(),g(X,{to:"body"},[e.isOpen?(n(),o("div",{key:0,class:$(["sb-dropdown-options-wrapper",{multi:e.multi,expanded:e.isOpen}]),"data-target":`options-${e.$.uid}`,style:z(e.optWrapperStyles),onScroll:t[1]||(t[1]=(...l)=>e.onScrollBottom&&e.onScrollBottom(...l)),ref:"options-wrapper"},[e.serverSide?(n(),g(k,O({key:1,"active-option":e.activeOption,"is-open":e.isOpen,multi:e.multi,"on-ajax":e.handleAjax,optLabel:e.optLabel,selected:e.selected,"server-side":e.serverSide,term:e.localTerm,infinite:e.infinite,"is-scroll-bottom":e.isScrollBottom},{loadingText:e.loadingText,noResultText:e.noResultText},{onListChange:e.handleListChange,onLoading:e.handleAjaxLoading,onSelect:e.doSelect}),null,16,["active-option","is-open","multi","on-ajax","optLabel","selected","server-side","term","infinite","is-scroll-bottom","onListChange","onLoading","onSelect"])):(n(),g(R,O({key:0,"active-option":e.activeOption,"is-loading":e.isLoading,list:e.localList,multi:e.multi,optLabel:e.optLabel,selected:e.selected},{loadingText:e.loadingText,noResultText:e.noResultText},{onSelect:e.doSelect}),null,16,["active-option","is-loading","list","multi","optLabel","selected","onSelect"]))],46,Pe)):f("",!0)]))],16,je)}const He=T(W,[["render",Ae]]);W.__docgenInfo={displayName:"sb-form-dropdown",exportName:"default",description:"",tags:{},props:[{name:"allowClear",type:{name:"boolean"},required:!1},{name:"disabled",type:{name:"boolean"},required:!1},{name:"closeOnSelect",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"errorMessage",type:{name:"string|func"},required:!1},{name:"flat",type:{name:"boolean"},required:!1},{name:"infinite",type:{name:"boolean"},required:!1},{name:"isError",type:{name:"boolean"},required:!1},{name:"isLoading",type:{name:"boolean"},required:!1},{name:"label",type:{name:"string"},required:!1},{name:"list",type:{name:"any[]"},required:!1},{name:"loadingText",type:{name:"string"},defaultValue:{func:!1,value:"'Loading...'"}},{name:"modelValue",type:{name:`| Record<string, any>
| Record<string, any>[]
| String
| String[]
| number
| number[]
| null`},required:!1},{name:"multi",type:{name:"boolean"},required:!1},{name:"noResultText",type:{name:"string"},defaultValue:{func:!1,value:"'No Results Found...'"}},{name:"onAjax",type:{name:`(
    _resp: IServerSideHandler,
    _type: string | 'BEFORE SEND' | 'ERROR' | 'SUCCESS',
    _isLoadMore?: boolean,
) => void`},required:!1},{name:"onPopulateList",type:{name:"(_term: string, _isLoadMore?: boolean) => void"},required:!1},{name:"optLabel",type:{name:"string|func"},required:!0},{name:"optValue",type:{name:"string"},required:!1},{name:"placeholder",type:{name:"string"},required:!1},{name:"readOnly",type:{name:"boolean"},required:!1},{name:"required",type:{name:"boolean"},required:!1},{name:"search",type:{name:"boolean"},required:!1},{name:"serverSide",type:{name:"IServerSide"},required:!1},{name:"value",type:{name:`| Record<string, any>
| Record<string, any>[]
| String
| String[]
| number
| number[]
| null`},required:!1}],events:[{name:"update:modelValue",type:{names:["undefined"]}},{name:"change",type:{names:["undefined"]}},{name:"close"},{name:"input",type:{names:["undefined"]}},{name:"open"}],sourceFiles:["/Users/edgar/Documents/private-projects/vue-base-lib/src/components/form-dropdown/form-dropdown.vue"]};export{He as D};
