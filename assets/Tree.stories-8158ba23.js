import{e as _,s as N,o as n,g as r,n as b,k as g,f as d,l as v,m as h,j as c,F as E,G as L,q as P}from"./vue.esm-bundler-9f66a517.js";import{b as U,c as Y}from"./icons-f79f8569.js";import{_ as R}from"./_plugin-vue_export-helper-c27b6911.js";const C=(e,t)=>t?!!t[String(e.value)]:!1,S=e=>{const t=[];if(e.children){let l=e.children.flatMap(a=>a.children?[...a.children]:a);const s=()=>l.some(a=>!!a.children);do l=l.flatMap(a=>a.children?[...a.children]:a);while(s());return l}return t},F=_({emits:{deselect:e=>!0,expand:(e,t)=>!0,select:e=>!0},props:{checkBox:{required:!1,type:Boolean},expanded:{required:!1,type:Boolean},item:{required:!0,type:Object},multi:{required:!1,type:Boolean},selected:{required:!1,type:Object}},name:"sb-tree-view-item",data(){return{localExpand:!!this.expanded||!!this.item.expanded}},computed:{iconAngleRight(){return U()},iconCheck(){return Y()}},methods:{handleEmitDeselect(e){this.$emit("deselect",e)},handleEmitExpand(e,t){this.$emit("expand",e,t)},handleEmitSelect(e){this.$emit("select",e)},handleCheck(e){if(e.children){const t=this.isAllChecked(e),l=S(e);t?this.handleEmitDeselect(l):this.handleEmitSelect(l)}},handleClick(e){C(e,this.selected)?this.handleEmitDeselect(e):this.handleEmitSelect(e)},isAllChecked(e){return e.children?S(e).every(s=>this.selected&&!!this.selected[s.value]):!1},isPartialChecked(e){return e.children?S(e).some(s=>this.selected&&!!this.selected[s.value])&&!this.isAllChecked(e):!1},isSelected(e){return C(e,this.selected)},toggleExpand(e){this.handleEmitExpand(e,!this.localExpand),this.localExpand=!this.localExpand}}}),G={key:0,class:"check"},K=["innerHTML"],z={key:0,class:"check"},J={key:1},Q=["innerHTML"];function W(e,t,l,s,a,i){const o=N("sb-tree-view-item");return n(),r("li",{class:b(["tree-view-item",{expanded:e.item.children&&e.localExpand,"has-child":e.item.children}])},[e.item.children?(n(),r(E,{key:1},[c("div",{class:"label-wrapper",onClick:t[3]||(t[3]=()=>e.checkBox&&e.multi?e.handleCheck(e.item):e.toggleExpand(e.item))},[(n(),d(v(e.iconAngleRight),{onClick:t[2]||(t[2]=g(()=>e.toggleExpand(e.item),["stop"]))})),e.checkBox&&e.multi?(n(),r("div",{key:0,class:b(["check-wrapper",{"all-checked":e.isAllChecked(e.item)}])},[e.isAllChecked(e.item)?(n(),r("span",z,[(n(),d(v(e.iconCheck)))])):e.isPartialChecked(e.item)?(n(),r("span",J,"-")):h("",!0)],2)):h("",!0),c("label",{innerHTML:e.item.label},null,8,Q)]),c("ul",null,[(n(!0),r(E,null,L(e.item.children,(m,y)=>(n(),d(o,{"check-box":e.checkBox,expanded:m.children&&!!e.expanded,item:m,key:`item-${y}`,multi:e.multi,selected:e.selected,onDeselect:e.handleEmitDeselect,onExpand:e.handleEmitExpand,onSelect:e.handleEmitSelect},null,8,["check-box","expanded","item","multi","selected","onDeselect","onExpand","onSelect"]))),128))])],64)):(n(),r("div",{key:0,class:b(["label-wrapper",{selected:e.isSelected(e.item)}])},[e.checkBox?(n(),r("div",{key:0,class:"check-wrapper",onClick:t[0]||(t[0]=g(()=>e.handleClick(e.item),["stop"]))},[e.isSelected(e.item)?(n(),r("span",G,[(n(),d(v(e.iconCheck)))])):h("",!0)])):h("",!0),c("label",{onClick:t[1]||(t[1]=g(()=>e.handleClick(e.item),["stop"])),innerHTML:e.item.label},null,8,K)],2))],2)}const X=R(F,[["render",W]]);F.__docgenInfo={displayName:"sb-tree-view-item",exportName:"default",description:"",tags:{},props:[{name:"checkBox",type:{name:"boolean"},required:!1},{name:"expanded",type:{name:"boolean"},required:!1},{name:"item",type:{name:"ITreeItem"},required:!0},{name:"multi",type:{name:"boolean"},required:!1},{name:"selected",type:{name:"Record<any, ITreeItem>"},required:!1}],events:[{name:"deselect",type:{names:["undefined"]}},{name:"expand",type:{names:["undefined"]},properties:[{type:{names:["undefined"]},name:"<anonymous1>"}]},{name:"select",type:{names:["undefined"]}}],sourceFiles:["/Users/edgar/Documents/private-projects/vue-base-lib/src/components/tree/__item.vue"]};const H=_({emits:{change:e=>!0,expand:(e,t)=>!0},props:{checkBox:{required:!1,type:Boolean},expanded:{required:!1,type:Boolean},list:{required:!0,type:Object},multi:{required:!1,type:Boolean},selected:{required:!1,type:Object}},name:"sb-tree-view",components:{"sb-tree-item":X},data(){return{localSelected:{}}},methods:{handleChange(){this.multi?this.$emit("change",Object.values(this.localSelected)):this.$emit("change",Object.values(this.localSelected)[0]||null)},handleDeselect(e){const t={...this.localSelected};if(Array.isArray(e)){const l=Object.keys({...this.localSelected}),s=e.map(i=>String(i.value)),a=l.filter(i=>s.indexOf(i)<0);this.localSelected=a.reduce((i,o)=>({...i,[o]:t[o]}),{})}else t[e.value]&&delete t[e.value],this.localSelected={...t};this.$nextTick(()=>{this.handleChange()})},handleItemExpand(e,t){this.$emit("expand",e,t)},handleSelect(e){if(Array.isArray(e)){const t=[...Object.values(this.localSelected),...e];this.localSelected=t.reduce((l,s)=>({...l,[s.value]:s}),{})}else this.multi?this.localSelected={...this.localSelected,[e.value]:e}:this.localSelected={[e.value]:e};this.$nextTick(()=>{this.handleChange()})}},watch:{selected:{deep:!0,handler(e){if(e)if(Array.isArray(e)){const t={};e.forEach(l=>{t[l.value]=l}),this.localSelected={...t}}else this.localSelected={[e.value]:e};else this.localSelected={}},immediate:!0}}});function Z(e,t,l,s,a,i){const o=N("sb-tree-item");return n(),r("div",P({class:"tree-view"},{...e.$attrs}),[c("ul",null,[(n(!0),r(E,null,L(e.list,(m,y)=>(n(),d(o,{"check-box":e.checkBox,expanded:e.expanded,item:m,key:`item-${y}`,multi:e.multi,selected:e.localSelected,onDeselect:e.handleDeselect,onExpand:e.handleItemExpand,onSelect:e.handleSelect},null,8,["check-box","expanded","item","multi","selected","onDeselect","onExpand","onSelect"]))),128))])],16)}const V=R(H,[["render",Z]]);H.__docgenInfo={displayName:"sb-tree-view",exportName:"default",description:"",tags:{},props:[{name:"checkBox",type:{name:"boolean"},required:!1},{name:"expanded",type:{name:"boolean"},required:!1},{name:"list",type:{name:"ITreeItem[]"},required:!0},{name:"multi",type:{name:"boolean"},required:!1},{name:"selected",type:{name:"ITreeItem[] | ITreeItem | null"},required:!1}],events:[{name:"change",type:{names:["undefined"]}},{name:"expand",type:{names:["undefined"]},properties:[{type:{names:["undefined"]},name:"<anonymous1>"}]}],sourceFiles:["/Users/edgar/Documents/private-projects/vue-base-lib/src/components/tree/tree.vue"]};const{UPDATE_STORY_ARGS:ee}=__STORYBOOK_MODULE_CORE_EVENTS__,se={title:"Components/Tree",component:V,tags:["autodocs"],argTypes:{checkBox:{control:"boolean",description:"Show Check Box on each item"},expanded:{control:"boolean",description:"Expand/Collapse Tree items"},list:{control:"object",description:"Tree items"},multi:{control:"boolean",description:"Multiple select Tree item"},onChange:{action:"change",control:!1,description:"Tree will fire this event when user select items",table:{category:"events",type:{summary:"(selected: ITreeItem | ITreeItem[] | null) => void"}},type:"function"},onExpand:{action:"change",control:!1,description:"Tree will fire this event when Tree items expanded",table:{category:"events",type:{summary:"(item: ITreeItem, isExpanded: boolean) => void"}},type:"function"},selected:{control:"object",description:"Selected Tree items"}},args:{list:[{label:"My Tree",children:[{label:"hello",value:1},{label:"wat",value:2},{label:"child folder",children:[{label:"child folder",children:[{label:"hello",value:3},{label:"wat",value:4}]},{label:"hello",value:5},{label:"wat",value:6},{label:"child folder",children:[{label:"hello",value:7},{label:"wat",value:8}]}]}]},{label:"yolo",value:9}],selected:null},decorators:[(e,t)=>(delete t.args.change,t.args.onChange=l=>{window.__STORYBOOK_ADDONS_CHANNEL__.emit(ee,{storyId:t.id,updatedArgs:{selected:l}})},e())],parameters:{docs:{controls:{exclude:["change","expand"],sort:"requiredFirst"}}}},p={args:{}},u={args:{multi:!0}},f={args:{checkBox:!0}},k={args:{checkBox:!0,multi:!0}};var B,T,x;p.parameters={...p.parameters,docs:{...(B=p.parameters)==null?void 0:B.docs,source:{originalSource:`{
  args: {}
}`,...(x=(T=p.parameters)==null?void 0:T.docs)==null?void 0:x.source}}};var q,w,I;u.parameters={...u.parameters,docs:{...(q=u.parameters)==null?void 0:q.docs,source:{originalSource:`{
  args: {
    multi: true
  }
}`,...(I=(w=u.parameters)==null?void 0:w.docs)==null?void 0:I.source}}};var O,$,A;f.parameters={...f.parameters,docs:{...(O=f.parameters)==null?void 0:O.docs,source:{originalSource:`{
  args: {
    checkBox: true
  }
}`,...(A=($=f.parameters)==null?void 0:$.docs)==null?void 0:A.source}}};var D,M,j;k.parameters={...k.parameters,docs:{...(D=k.parameters)==null?void 0:D.docs,source:{originalSource:`{
  args: {
    checkBox: true,
    multi: true
  }
}`,...(j=(M=k.parameters)==null?void 0:M.docs)==null?void 0:j.source}}};const ae=["Default","MultiSelect","CheckBox","MultiCheckBox"];export{f as CheckBox,p as Default,k as MultiCheckBox,u as MultiSelect,ae as __namedExportsOrder,se as default};
