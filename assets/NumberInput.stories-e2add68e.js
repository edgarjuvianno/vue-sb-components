import{e as j,J as z,o as s,g as o,j as l,n as d,v as I,m,k as H,p as K,z as Y,B as G,q as v,f as V,l as N,F as S,C as J,h as x}from"./vue.esm-bundler-1a22c5b9.js";import{U as Q}from"./maska-82a16b27.js";import{p as W}from"./helper-91f3687e.js";import{s as X,e as Z}from"./icons-69f7cd3d.js";import{_}from"./_plugin-vue_export-helper-c27b6911.js";const A=j({emits:["change","input","update:modelValue","blur","focus","keydown"],props:{autocomplete:{default:"on",type:String},disabled:{required:!1,type:Boolean},errorMessage:{required:!1,type:[String,Function]},icon:{required:!1,type:Object},invalidNumberMessage:{default:"Please enter valid numbers",type:String},isError:{required:!1,type:Boolean},isFocus:{required:!1,type:Boolean},label:{required:!1,type:String},max:{required:!1,type:Number},maxDecimalPlaces:{default:10,type:Number},min:{required:!1,type:Number},modelValue:{required:!1,type:null},numberLocale:{default:"en-US",type:String},placeholder:{required:!1,type:String},readOnly:{required:!1,type:Boolean},required:{required:!1,type:Boolean},step:{default:1,type:Number},tabindex:{required:!1,type:Number},textAlign:{default:"left",type:String},value:{required:!1,type:null},variant:{default:"default",required:!1,type:String},withLocale:{default:!1,type:Boolean}},name:"sb-form-input",directives:{maska:Q},data(){return{localIsFocus:!1,isInvalidNumber:!1,localValue:this.modelValue||this.value||null}},computed:{getMaskaOptions(){if(!this.withLocale){const e=[...Array(this.maxDecimalPlaces).keys()].map(()=>"9").join("");return this.maxDecimalPlaces?{mask:`#0.${e}`,preProcess:t=>String(t),tokens:{"#":{optional:!0,pattern:/-/},0:{multiple:!0,pattern:/[0-9]/},9:{optional:!0,pattern:/[0-9]/}}}:{mask:"#0",preProcess:t=>String(t),tokens:{"#":{optional:!0,pattern:/-/},0:{multiple:!0,pattern:/[0-9]/}}}}return{postProcess:e=>{if(e&&typeof e<"u"&&e!==""){const t=this.getRealValue(String(e)),a=Number(String(t).split(this.numberLocale==="en-US"?".":",")[0]);if(this.maxDecimalPlaces){if(!Number.isNaN(t))return Intl.NumberFormat(this.numberLocale,{maximumFractionDigits:this.maxDecimalPlaces,minimumFractionDigits:0}).format(Number(t))}else return Intl.NumberFormat(this.numberLocale,{maximumFractionDigits:this.maxDecimalPlaces,minimumFractionDigits:0}).format(a)}return e||""},preProcess:e=>String(e).split(/[.,]/g)[0]===""?"":String(e).replace(/[^0-9,.-]/gi,"")}},iconSortDown(){return X()},iconSortUp(){return Z()},isFilled(){var e;return this.localValue!==null&&typeof this.localValue<"u"?typeof this.localValue!="number"?this.localValue!==""||((e=this.localValue)==null?void 0:e.length)||Object.keys(this.localValue).length>0:!0:!1}},methods:{getRealValue(e){if(!e||typeof e>"u")return null;if(e=String(e),this.withLocale){if(this.numberLocale==="en-US"&&e.split(".")[0]!==""&&e.split(".")[1]===""||this.numberLocale==="id-ID"&&e.split(",")[0]!==""&&e.split(",")[1]===""||e==="-")return+"-"}else return e.split(".")[0]!==""&&e.split(".")[1]===""?+"-":Number(e);return W(e,this.numberLocale)},handleBlur(e){this.localIsFocus=!1;const t=this.getRealValue(this.localValue);e.target.value=Number.isNaN(t)?this.localValue:Number(t),this.$emit("blur",e)},handleChange(e){var a,r,i,b;const t=e;if(typeof((a=t.detail)==null?void 0:a.unmasked)<"u"){const y=(r=t.detail)==null?void 0:r.unmasked,u=(i=t.detail)==null?void 0:i.masked,n=this.getRealValue(u);y===""?(t.target.value=(b=t.detail)==null?void 0:b.unmasked,this.isInvalidNumber=!1,this.$emit("input",e),this.$emit("update:modelValue",null)):Number.isNaN(n)?(this.isInvalidNumber=!0,this.$emit("input",e),this.$emit("update:modelValue",u)):(t.target.value=n,this.isInvalidNumber=!1,this.$emit("input",e),this.$emit("update:modelValue",n))}},handleClickIcon(e){var t;return((t=this.icon)==null?void 0:t.onClick)&&this.icon.onClick(e)},handleClickOutsideInput(e){const t=e.target,a=this.$refs["input-wrapper"];t&&a&&!a.contains(t)&&!t.isSameNode(a)&&this.toggleFocus(!1)},handleClickStep(e){const t=this.getRealValue(this.localValue)||0,a=Number.isNaN(t)?0:t+e;t>0&&t<1&&a<0?this.localValue=0:typeof this.max<"u"&&a>this.max?this.localValue=this.max:typeof this.min<"u"&&a<this.min?this.localValue=this.min:this.withLocale&&this.numberLocale==="id-ID"?this.localValue=Intl.NumberFormat(this.numberLocale,{maximumFractionDigits:this.maxDecimalPlaces,minimumFractionDigits:0}).format(Number(a)):this.localValue=a},handleErrorMessage(){return this.errorMessage?typeof this.errorMessage=="string"?this.errorMessage:this.errorMessage(this.localValue):""},handleInputChange(e){const t=this.getRealValue(this.localValue);t!==null&&typeof this.max<"u"&&!Number.isNaN(t)&&t>this.max?(e.target.value=this.max,this.localValue=this.max,this.$emit("update:modelValue",this.max),this.$emit("change",e)):t!==null&&typeof this.min<"u"&&!Number.isNaN(t)&&t<this.min?(e.target.value=this.min,this.localValue=this.min,this.$emit("update:modelValue",this.min),this.$emit("change",e)):(e.target.value=Number.isNaN(t)?this.localValue:t,this.$emit("change",e))},handleInputFocus(e){this.localIsFocus=!0,this.$emit("focus",e)},handleKeydown(e){if(!this.maxDecimalPlaces&&(e.key===","||e.key==="."))e.preventDefault(),e.stopPropagation();else if(e.key==="ArrowUp")e.preventDefault(),e.stopPropagation(),this.handleClickStep(this.step);else if(e.key==="ArrowDown")e.preventDefault(),e.stopPropagation(),this.handleClickStep(this.step*-1);else if(this.maxDecimalPlaces&&this.withLocale&&(e.key===","||e.key===".")){const t=String(this.localValue);if(t){const a=e.target,r=a.selectionStart,i=a.selectionEnd;this.numberLocale==="en-US"&&e.key===","?(e.preventDefault(),e.stopPropagation(),this.localValue=`${t.substr(0,r)}.${t.substr(i)}`,a.selectionEnd=i+1):this.numberLocale==="id-ID"&&e.key==="."&&(e.preventDefault(),e.stopPropagation(),this.localValue=`${t.substr(0,r)},${t.substr(i)}`,a.selectionEnd=i+1)}}this.$emit("keydown",e)},handleMouseLeaveIcon(e){var t;return((t=this.icon)==null?void 0:t.onMouseLeave)&&this.icon.onMouseLeave(e)},handleMouseOverIcon(e){var t;return((t=this.icon)==null?void 0:t.onMouseOver)&&this.icon.onMouseOver(e)},handlePaste(e){const a=(e.clipboardData||window.clipboardData).getData("Text");/^-?\d*[.,]?\d*$/.test(a)||e.preventDefault()},handleValueProp(e){e!==null&&typeof e<"u"&&String(e)!==""&&this.withLocale&&this.numberLocale==="id-ID"&&!Number.isNaN(Number(e))?this.localValue=Intl.NumberFormat(this.numberLocale,{maximumFractionDigits:this.maxDecimalPlaces,minimumFractionDigits:0}).format(Number(e)):this.localValue=e},toggleFocus(e,t){if(t){const a=t.target,r=a==null?void 0:a.querySelectorAll("input");r.length>0&&r[0].focus()}this.localIsFocus=e}},watch:{isFocus(e){this.localIsFocus=e},modelValue:{handler(e){this.handleValueProp(e)}},value:{handler(e){this.handleValueProp(e)}}},mounted(){document.addEventListener("click",e=>this.handleClickOutsideInput(e))},unmounted(){document.removeEventListener("click",e=>this.handleClickOutsideInput(e))}});const ee={key:0,class:"asterisk"},te=["tabindex"],ae={class:"button-wrapper"},ne={class:"input-border"},se={class:"notch"},re={key:0,class:"asterisk"},le={key:0,class:"error-wrapper"},ie={key:0},oe=["innerHTML"];function ue(e,t,a,r,i,b){var u;const y=z("maska");return s(),o("div",v({class:["input-wrapper number",{error:e.isError,flat:e.variant==="flat"}],ref:"input-wrapper"},{...e.$attrs}),[l("div",{class:d(["input-group",{disabled:e.disabled,filled:e.isFilled,focus:e.isFocus||e.localIsFocus,icon_prepend:!!e.icon||!!e.$slots["icon-slot"],readonly:e.readOnly}])},[e.label?(s(),o("label",{key:0,class:d(["label",{required:e.required}])},[l("span",null,I(e.label),1),e.required?(s(),o("span",ee,"*")):m("",!0)],2)):m("",!0),e.icon||e.$slots["icon-slot"]?(s(),o("span",{key:1,class:d([{"sb-cursor-pointer":(u=e.icon)==null?void 0:u.onClick},"icon"]),onClick:t[0]||(t[0]=H((...n)=>e.handleClickIcon&&e.handleClickIcon(...n),["stop"])),onMouseover:t[1]||(t[1]=(...n)=>e.handleMouseOverIcon&&e.handleMouseOverIcon(...n)),onMouseleave:t[2]||(t[2]=(...n)=>e.handleMouseLeaveIcon&&e.handleMouseLeaveIcon(...n))},[K(e.$slots,"icon-slot")],34)):m("",!0),l("div",{class:d(["form-control",["text",e.textAlign]]),onClick:t[10]||(t[10]=n=>e.toggleFocus(!0,n))},[Y(l("input",v({tabindex:e.readOnly||e.disabled?-1:e.tabindex,type:"text","onUpdate:modelValue":t[3]||(t[3]=n=>e.localValue=n)},{autocomplete:e.autocomplete,disabled:e.disabled,placeholder:e.placeholder,readonly:e.readOnly},{onBlur:t[4]||(t[4]=n=>e.handleBlur(n)),onFocus:t[5]||(t[5]=n=>e.handleInputFocus(n)),onInput:t[6]||(t[6]=n=>e.handleChange(n)),onKeydown:t[7]||(t[7]=n=>e.handleKeydown(n)),onChange:t[8]||(t[8]=n=>e.handleInputChange(n)),onPaste:t[9]||(t[9]=(...n)=>e.handlePaste&&e.handlePaste(...n))}),null,16,te),[[y,void 0,e.getMaskaOptions],[G,e.localValue]])],2),l("div",ae,[l("div",{class:"button increment",onClick:t[11]||(t[11]=n=>e.handleClickStep(e.step))},[(s(),V(N(e.iconSortUp)))]),l("div",{class:"button decrement",onClick:t[12]||(t[12]=n=>e.handleClickStep(e.step*-1))},[(s(),V(N(e.iconSortDown)))])]),l("fieldset",ne,[l("legend",se,[l("span",{class:d(["notch-label",{"no-label":!e.label||e.label===""}])},[e.label&&e.label!==""?(s(),o(S,{key:0},[l("span",null,I(e.label),1),e.required?(s(),o("span",re,"*")):m("",!0)],64)):(s(),o(S,{key:1},[J("â€‹")],64))],2)])])],2),e.isInvalidNumber||e.isError&&e.errorMessage?(s(),o("div",le,[e.isInvalidNumber?(s(),o("span",ie,I(e.invalidNumberMessage),1)):(s(),o("span",{key:1,innerHTML:e.handleErrorMessage()},null,8,oe))])):m("",!0)],16)}const R=_(A,[["render",ue]]);A.__docgenInfo={displayName:"sb-form-input",exportName:"default",description:"",tags:{},props:[{name:"autocomplete",values:["off","on"],type:{name:"string"},defaultValue:{func:!1,value:"'on'"}},{name:"disabled",type:{name:"boolean"},required:!1},{name:"errorMessage",type:{name:"string|func"},required:!1},{name:"icon",type:{name:"IIcon"},required:!1},{name:"invalidNumberMessage",type:{name:"string"},defaultValue:{func:!1,value:"'Please enter valid numbers'"}},{name:"isError",type:{name:"boolean"},required:!1},{name:"isFocus",type:{name:"boolean"},required:!1},{name:"label",type:{name:"string"},required:!1},{name:"max",type:{name:"number"},required:!1},{name:"maxDecimalPlaces",type:{name:"number"},defaultValue:{func:!1,value:"10"}},{name:"min",type:{name:"number"},required:!1},{name:"modelValue",type:{name:"string | number | null"},required:!1},{name:"numberLocale",values:["en-US","id-ID"],type:{name:"string"},defaultValue:{func:!1,value:"'en-US'"}},{name:"placeholder",type:{name:"string"},required:!1},{name:"readOnly",type:{name:"boolean"},required:!1},{name:"required",type:{name:"boolean"},required:!1},{name:"step",type:{name:"number"},defaultValue:{func:!1,value:"1"}},{name:"tabindex",type:{name:"number"},required:!1},{name:"textAlign",values:["left","right"],type:{name:"string"},defaultValue:{func:!1,value:"'left'"}},{name:"value",type:{name:"string | number | null"},required:!1},{name:"variant",values:["default","flat"],type:{name:"string"},required:!1,defaultValue:{func:!1,value:"'default'"}},{name:"withLocale",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"change",type:{names:["undefined"]}},{name:"input",type:{names:["undefined"]}},{name:"update:modelValue",type:{names:["undefined"]}},{name:"blur",type:{names:["undefined"]}},{name:"focus",type:{names:["undefined"]}},{name:"keydown",type:{names:["undefined"]}}],slots:[{name:"icon-slot"}],sourceFiles:["/Users/edgar/Documents/private-projects/vue-component-lib/vue-base-lib-storybook/src/components/form-input-number/form-input-number.vue"]};const{UPDATE_STORY_ARGS:de}=__STORYBOOK_MODULE_CORE_EVENTS__,ge={title:"Forms/Number Input",component:R,tags:["autodocs"],argTypes:{"icon-slot":{description:"Input icon slot"},"update:modelValue":{action:"change",control:!1,description:"This event fired when input value changed"},autocomplete:{control:"text",description:"Is Input autocomplete on/off"},blur:{action:"change",control:!1,description:"This event fired when on blur"},change:{action:"change",control:!1,description:"This event fired when input value changed"},disabled:{control:"boolean",description:"Is Input disabled"},errorMessage:{control:"text",description:"Input error message"},focus:{action:"change",control:!1,description:"This event fired when on focus"},icon:{control:"object",description:'Input Icon configurations. Placement for this input only "prepend"'},input:{action:"change",control:!1,description:"This event fired when input value changed"},invalidNumberMessage:{control:"text",description:"Input number error validation message"},isError:{control:"boolean",description:"Is Input validation error"},isFocus:{control:"boolean",description:"Trigger input focus"},keydown:{action:"change",control:!1,description:"This event fired when on keydown"},label:{control:"text",description:"Input label"},max:{control:"number",description:"Input max value"},maxDecimalPlaces:{control:"number",description:"Max number decimal places"},min:{control:"number",description:"Input min value"},modelValue:{control:"text",description:"Input value"},numberLocale:{control:"select",description:'Number locale only work if prop "withLocale" exist',options:["en-US","id-ID"]},placeholder:{control:"text",description:"Input placeholder"},readOnly:{control:"boolean",description:"Is Input read-only"},required:{control:"boolean",description:"Is Input required"},step:{control:"number",description:"Input step"},tabindex:{control:"number",description:"Input tab-index"},textAlign:{control:"select",description:"Input text align",options:["left","right"]},value:{control:"text",description:"Input value"},variant:{control:"select",description:"Input style",options:["default","flat"]},withLocale:{control:"boolean",description:"Format number using locale"}},args:{label:"Some Text Input",modelValue:null},decorators:[(e,t)=>(delete t.args.change,delete t.args.input,delete t.args["update:modelValue"],t.args.onInput=a=>{const r=a.target.value;window.__STORYBOOK_ADDONS_CHANNEL__.emit(de,{storyId:t.id,updatedArgs:{modelValue:r}})},e())]},p={args:{}},c={args:{disabled:!0}},f={args:{readOnly:!0}},h={args:{errorMessage:"Some Error Message",isError:!0}},g={render:e=>({components:{NumberInput:R},setup(){const t=x("svg",{class:"sb-icon magnifying-glass",innerHTML:'<path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"/>',viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"});return{args:e,icon:t}},template:`
            <NumberInput v-bind="args">
                <template v-slot:icon-slot>
                    <component :is="icon" />
                </template>
            </NumberInput>
        `})};var k,D,w;p.parameters={...p.parameters,docs:{...(k=p.parameters)==null?void 0:k.docs,source:{originalSource:`{
  args: {}
}`,...(w=(D=p.parameters)==null?void 0:D.docs)==null?void 0:w.source}}};var M,L,q;c.parameters={...c.parameters,docs:{...(M=c.parameters)==null?void 0:M.docs,source:{originalSource:`{
  args: {
    disabled: true
  }
}`,...(q=(L=c.parameters)==null?void 0:L.docs)==null?void 0:q.source}}};var F,P,O;f.parameters={...f.parameters,docs:{...(F=f.parameters)==null?void 0:F.docs,source:{originalSource:`{
  args: {
    readOnly: true
  }
}`,...(O=(P=f.parameters)==null?void 0:P.docs)==null?void 0:O.source}}};var C,$,E;h.parameters={...h.parameters,docs:{...(C=h.parameters)==null?void 0:C.docs,source:{originalSource:`{
  args: {
    errorMessage: 'Some Error Message',
    isError: true
  }
}`,...(E=($=h.parameters)==null?void 0:$.docs)==null?void 0:E.source}}};var T,B,U;g.parameters={...g.parameters,docs:{...(T=g.parameters)==null?void 0:T.docs,source:{originalSource:`{
  render: args => ({
    components: {
      NumberInput
    },
    setup() {
      const icon: any = h('svg', {
        class: 'sb-icon magnifying-glass',
        innerHTML: '<path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"/>',
        viewBox: '0 0 512 512',
        xmlns: 'http://www.w3.org/2000/svg'
      });
      return {
        args,
        icon
      };
    },
    template: \`
            <NumberInput v-bind="args">
                <template v-slot:icon-slot>
                    <component :is="icon" />
                </template>
            </NumberInput>
        \`
  })
}`,...(U=(B=g.parameters)==null?void 0:B.docs)==null?void 0:U.source}}};const be=["Default","Disabled","ReadOnly","Error","Icon"];export{p as Default,c as Disabled,h as Error,g as Icon,f as ReadOnly,be as __namedExportsOrder,ge as default};
