import{e as k,s as $,o as d,g as l,F as M,n as E,v as D,m as f,D as G,f as v,q as c,k as g,u as T,j as p}from"./vue.esm-bundler-1a22c5b9.js";import{_ as V}from"./_plugin-vue_export-helper-c27b6911.js";const L=(e,t,a)=>{var s;const i=[...t];if(i.length){if((s=e[Number(i[0])])!=null&&s.childs&&i.length>1){const n=Number(i[0]),r=[...e[Number(i[0])].childs||[]];return i.shift(),[...e].map((m,h)=>h===n?{...m,childs:[...L(r,i,a)]}:m)}}else return e;return[...e].map((n,r)=>r===Number(i[0])?{...n,childs:[...n.childs||[],a]}:n)},j=(e,t)=>{var i,s;const a=[...t];if(a.length){if((i=e[Number(a[0])])!=null&&i.childs&&a.length>1){const n=[...e[Number(a[0])].childs||[]];return a.shift(),j(n,a)}}else return e;return[...((s=e[Number(a[0])])==null?void 0:s.childs)||[]]},B=(e,t,a)=>{var s;const i=[...t];if(i.length){if((s=e[Number(i[0])])!=null&&s.childs&&i.length>1){const n=Number(i[0]),r=[...e[Number(i[0])].childs||[]];return i.shift(),[...e].map((m,h)=>h===n?{...m,childs:[...B(r,i,a)]}:m)}}else return e;return[...e].map((n,r)=>r===Number(i[0])?a:n)},b=(e,t)=>{var i;const a=[...t];if(a.length){if((i=e[Number(a[0])])!=null&&i.childs&&a.length>1){const s=Number(a[0]),n=[...e[Number(a[0])].childs||[]];return a.shift(),[...e].map((r,m)=>m===s?{...r,childs:[...b(n,a)]}:r)}}else return e;return[...e].filter((s,n)=>n!==Number(a[0]))},J=k({emits:{changeItem:(e,t)=>!0},props:{isDraggable:{required:!1,type:Boolean},item:{required:!0,type:Object},lastIndex:{required:!0,type:Number}},name:"sb-organization-tree-item",data(){return{draggedCards:[],dropTarget:null,onDropTimeout:null}},computed:{},methods:{handleDragCard(e,t){var i;e.stopPropagation();const a=e.target;this.draggedCards.push(a.id),(i=e.dataTransfer)==null||i.setData("text/html",JSON.stringify({data:{...t},index:this.$.vnode.key}))},handleDragEnd(e){e.stopPropagation();const t=e.target;this.draggedCards=[...this.draggedCards].filter(a=>a!==t.id)},handleDragEnter(e){const t=e.target;this.dropTarget=t.id,this.onDropTimeout&&clearTimeout(this.onDropTimeout)},handleDragLeave(){this.onDropTimeout=setTimeout(()=>{this.dropTarget=null},50)},handleDropCard(e,t){var i;e.stopPropagation(),this.handleDragLeave();const a=(i=e.dataTransfer)==null?void 0:i.getData("text/html");if(a){const s=a.replace('<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">',""),n={...JSON.parse(s)},r=this.$.vnode.key;this.$emit("changeItem",{data:t,index:r},n)}},handleEmitChange(e,t){this.$emit("changeItem",e,t)},isDragged(e){return this.draggedCards.indexOf(e)>-1}}}),Y={key:1,class:"parent-tree"},R=["id"],U={class:"data-wrapper"},P={class:"name"},X={class:"position"},K=["innerHTML"],Q=["id"],_={class:"data-wrapper"},ee={class:"name"},te={class:"position"},ae=["innerHTML"],ie={class:"parent-tree"};function ne(e,t,a,i,s,n){var m,h,w,H;const r=$("sb-organization-tree-item");return d(),l("li",{class:E(["child-tree",{"has-childs":!!((m=e.item.childs)!=null&&m.length)}])},[e.item.department?(d(),l(M,{key:0},[e.item.department?(d(),l("div",{key:0,class:E(["department",{"has-childs":!!((h=e.item.childs)!=null&&h.length)}])},D(e.item.department),3)):f("",!0),(w=e.item.childs)!=null&&w.length?(d(),l("ul",Y,[(d(!0),l(M,null,G(e.item.childs,(o,u)=>(d(),v(r,c({item:o,key:`${String(e.$.vnode.key)}-${u}`,"last-index":e.lastIndex+u+1},{isDraggable:e.isDraggable},{onChangeItem:e.handleEmitChange}),null,16,["item","last-index","onChangeItem"]))),128))])):f("",!0)],64)):(H=e.item.childs)!=null&&H.length?(d(),l(M,{key:2},[p("div",c({class:["card has-childs",{draggable:e.isDraggable&&e.lastIndex>1,dragged:e.isDragged(String(e.lastIndex)),droparea:e.dropTarget===String(e.lastIndex)}],id:String(e.lastIndex)},{draggable:e.isDraggable&&e.lastIndex>1,...e.lastIndex>1&&{onDragend:e.handleDragEnd,onDragstart:o=>e.handleDragCard(o,e.item)}},{onDragenter:t[6]||(t[6]=g((...o)=>e.handleDragEnter&&e.handleDragEnter(...o),["prevent"])),onDragleave:t[7]||(t[7]=g((...o)=>e.handleDragLeave&&e.handleDragLeave(...o),["prevent"])),onDragover:t[8]||(t[8]=g((...o)=>e.handleDragEnter&&e.handleDragEnter(...o),["prevent"])),onDrop:t[9]||(t[9]=g(o=>e.handleDropCard(o,e.item),["prevent"]))}),[e.item.photo?(d(),l("div",{key:0,class:"item-photo",style:T({backgroundImage:`url(${e.item.photo})`})},null,4)):f("",!0),p("div",_,[p("p",ee,D(e.item.name),1),p("p",te,D(e.item.position),1),e.item.additionalInfo?(d(),l("div",{key:0,innerHTML:e.item.additionalInfo},null,8,ae)):f("",!0)])],16,Q),p("ul",ie,[(d(!0),l(M,null,G(e.item.childs,(o,u)=>(d(),v(r,c({item:o,key:`${String(e.$.vnode.key)}-${u}`,"last-index":e.lastIndex+u+1},{isDraggable:e.isDraggable},{onChangeItem:e.handleEmitChange}),null,16,["item","last-index","onChangeItem"]))),128))])],64)):(d(),l("div",c({key:1,class:["card",{draggable:e.isDraggable,dragged:e.isDragged(String(e.lastIndex)),droparea:e.dropTarget===String(e.lastIndex)}],id:String(e.lastIndex)},{draggable:e.isDraggable},{onDragend:t[0]||(t[0]=(...o)=>e.handleDragEnd&&e.handleDragEnd(...o)),onDragenter:t[1]||(t[1]=g((...o)=>e.handleDragEnter&&e.handleDragEnter(...o),["prevent"])),onDragleave:t[2]||(t[2]=g((...o)=>e.handleDragLeave&&e.handleDragLeave(...o),["prevent"])),onDragover:t[3]||(t[3]=g((...o)=>e.handleDragEnter&&e.handleDragEnter(...o),["prevent"])),onDragstart:t[4]||(t[4]=o=>e.handleDragCard(o,e.item)),onDrop:t[5]||(t[5]=g(o=>e.handleDropCard(o,e.item),["prevent"]))}),[e.item.photo?(d(),l("div",{key:0,class:"item-photo",style:T({backgroundImage:`url(${e.item.photo})`})},null,4)):f("",!0),p("div",U,[p("p",P,D(e.item.name),1),p("p",X,D(e.item.position),1),e.item.additionalInfo?(d(),l("div",{key:0,innerHTML:e.item.additionalInfo},null,8,K)):f("",!0)])],16,R))],2)}const oe=V(J,[["render",ne]]);J.__docgenInfo={displayName:"sb-organization-tree-item",exportName:"default",description:"",tags:{},props:[{name:"isDraggable",type:{name:"boolean"},required:!1},{name:"item",type:{name:"IOrganizationTreeItem"},required:!0},{name:"lastIndex",type:{name:"number"},required:!0}],events:[{name:"changeItem",type:{names:["undefined"]},properties:[{type:{names:["undefined"]},name:"<anonymous1>"}]}],sourceFiles:["/Users/edgar/Documents/private-projects/vue-base-lib/src/components/organization-tree/__organization-tree-item.vue"]};const W=k({emits:{change:e=>!0},props:{isDraggable:{required:!1,type:Boolean},list:{required:!0,type:Object}},name:"sb-organization-tree",components:{"sb-org-tree-item":oe},data(){return{cardIndex:1,localList:{}}},computed:{},methods:{handleChangeItem(e,t){const a=t.index.split("-org-")[1].split("-");if(e.index.split("-org")[1]===""){const i=[...this.localList.childs||[],t.data],s=[...b(i,a)];this.$emit("change",{...this.localList,childs:[...s]})}else{const i=e.index.split("-org-")[1].split("-"),s=[...this.localList.childs||[]];if(a.length<i.length)if(!e.data.childs&&!t.data.childs){const n=[...B(s,i,{...e.data,childs:[t.data]})],r=[...b(n,a)];this.$emit("change",{...this.localList,childs:[...r]})}else{const n=[...b(s,i)],r=[...e.data.childs||[]],m=[...j(n,a)],h={...t.data};delete h.childs;const w=[...B(n,a,{...e.data,childs:[...r,...m,h]})];this.$emit("change",{...this.localList,childs:[...w]})}else{const n=[...L(s,i,t.data)],r=[...b(n,a)];this.$emit("change",{...this.localList,childs:[...r]})}}}},watch:{list:{deep:!0,handler(e){Object.keys(e).length||(this.cardIndex=1),this.localList={...e}}}},mounted(){this.cardIndex=1,this.localList={...this.list||{}}}});const re={class:"parent-tree"};function se(e,t,a,i,s,n){const r=$("sb-org-tree-item");return d(),l("div",c({class:"organization-wrapper"},{...e.$attrs}),[p("ul",re,[(d(),v(r,c({item:e.localList,key:`${e.$.uid}-org`,lastIndex:e.cardIndex},{isDraggable:e.isDraggable},{onChangeItem:e.handleChangeItem}),null,16,["item","lastIndex","onChangeItem"]))])],16)}const de=V(W,[["render",se]]);W.__docgenInfo={displayName:"sb-organization-tree",exportName:"default",description:"",tags:{},props:[{name:"isDraggable",type:{name:"boolean"},required:!1},{name:"list",type:{name:"IOrganizationTreeItem"},required:!0}],events:[{name:"change",type:{names:["undefined"]}}],sourceFiles:["/Users/edgar/Documents/private-projects/vue-base-lib/src/components/organization-tree/organization-tree.vue"]};const{UPDATE_STORY_ARGS:le}=__STORYBOOK_MODULE_CORE_EVENTS__,pe={title:"Components/Organization Tree",component:de,tags:["autodocs"],argTypes:{isDraggable:{control:"boolean",description:"Is Item draggable"},list:{control:"object",description:"Organization Tree items"},onChange:{action:"click",control:!1,description:"Fired when tree changed by user drag",table:{category:"events",type:{summary:"(list: IOrganizationTreeItem) => void"}},type:"function"}},args:{list:{childs:[{childs:[{childs:[{name:"Ellie",photo:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cmFuZG9tJTIwcGVvcGxlfGVufDB8fDB8fHww",position:"Jr. Software Engineer"},{childs:[{name:"David",photo:"https://images.unsplash.com/photo-1539571696357-5a69c17a67c6?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8N3x8cmFuZG9tJTIwcGVvcGxlfGVufDB8fDB8fHww",position:"Front-End Engineer"},{name:"Motoki",photo:"https://images.unsplash.com/photo-1499996860823-5214fcc65f8f?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTh8fHJhbmRvbSUyMHBlb3BsZXxlbnwwfHwwfHx8MA%3D%3D",position:"Back-End Engineer"}],name:"Owen",photo:"https://images.unsplash.com/photo-1530268729831-4b0b9e170218?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTF8fHJhbmRvbSUyMHBlb3BsZXxlbnwwfHwwfHx8MA%3D%3D",position:"Software Engineer"}],name:"Ospan Ali",photo:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cmFuZG9tJTIwcGVvcGxlfGVufDB8fDB8fHww",position:"Head of Software Engineering"}],department:"Software Engineering"}],name:"Griffin Woldridge",photo:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8cmFuZG9tJTIwcGVvcGxlfGVufDB8fDB8fHww",position:"CEO"}},decorators:[(e,t)=>(delete t.args.change,t.args.onChange=a=>{window.__STORYBOOK_ADDONS_CHANNEL__.emit(le,{storyId:t.id,updatedArgs:{list:a}})},e())],parameters:{docs:{controls:{exclude:["change"],sort:"requiredFirst"}}}},y={args:{}},I={args:{isDraggable:!0}},x={args:{list:{childs:[{childs:[{additionalInfo:'<p style="margin: 0;">additional info</p>',childs:[{additionalInfo:'<p style="margin: 0;">additional info</p>',name:"Ellie",photo:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cmFuZG9tJTIwcGVvcGxlfGVufDB8fDB8fHww",position:"Jr. Software Engineer"},{childs:[{additionalInfo:'<p style="margin: 0;">additional info</p>',name:"David",photo:"https://images.unsplash.com/photo-1539571696357-5a69c17a67c6?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8N3x8cmFuZG9tJTIwcGVvcGxlfGVufDB8fDB8fHww",position:"Front-End Engineer"},{name:"Motoki",photo:"https://images.unsplash.com/photo-1499996860823-5214fcc65f8f?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTh8fHJhbmRvbSUyMHBlb3BsZXxlbnwwfHwwfHx8MA%3D%3D",position:"Back-End Engineer"}],name:"Owen",photo:"https://images.unsplash.com/photo-1530268729831-4b0b9e170218?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTF8fHJhbmRvbSUyMHBlb3BsZXxlbnwwfHwwfHx8MA%3D%3D",position:"Software Engineer"}],name:"Ospan Ali",photo:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cmFuZG9tJTIwcGVvcGxlfGVufDB8fDB8fHww",position:"Head of Software Engineering"}],department:"Software Engineering"}],name:"Griffin Woldridge",photo:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8cmFuZG9tJTIwcGVvcGxlfGVufDB8fDB8fHww",position:"CEO"}}};var F,S,A;y.parameters={...y.parameters,docs:{...(F=y.parameters)==null?void 0:F.docs,source:{originalSource:`{
  args: {}
}`,...(A=(S=y.parameters)==null?void 0:S.docs)==null?void 0:A.source}}};var C,z,Z;I.parameters={...I.parameters,docs:{...(C=I.parameters)==null?void 0:C.docs,source:{originalSource:`{
  args: {
    isDraggable: true
  }
}`,...(Z=(z=I.parameters)==null?void 0:z.docs)==null?void 0:Z.source}}};var q,N,O;x.parameters={...x.parameters,docs:{...(q=x.parameters)==null?void 0:q.docs,source:{originalSource:`{
  args: {
    list: {
      childs: [{
        childs: [{
          additionalInfo: '<p style="margin: 0;">additional info</p>',
          childs: [{
            additionalInfo: '<p style="margin: 0;">additional info</p>',
            name: 'Ellie',
            photo: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cmFuZG9tJTIwcGVvcGxlfGVufDB8fDB8fHww',
            position: 'Jr. Software Engineer'
          }, {
            childs: [{
              additionalInfo: '<p style="margin: 0;">additional info</p>',
              name: 'David',
              photo: 'https://images.unsplash.com/photo-1539571696357-5a69c17a67c6?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8N3x8cmFuZG9tJTIwcGVvcGxlfGVufDB8fDB8fHww',
              position: 'Front-End Engineer'
            }, {
              name: 'Motoki',
              photo: 'https://images.unsplash.com/photo-1499996860823-5214fcc65f8f?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTh8fHJhbmRvbSUyMHBlb3BsZXxlbnwwfHwwfHx8MA%3D%3D',
              position: 'Back-End Engineer'
            }],
            name: 'Owen',
            photo: 'https://images.unsplash.com/photo-1530268729831-4b0b9e170218?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTF8fHJhbmRvbSUyMHBlb3BsZXxlbnwwfHwwfHx8MA%3D%3D',
            position: 'Software Engineer'
          }],
          name: 'Ospan Ali',
          photo: 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cmFuZG9tJTIwcGVvcGxlfGVufDB8fDB8fHww',
          position: 'Head of Software Engineering'
        }],
        department: 'Software Engineering'
      }],
      name: 'Griffin Woldridge',
      photo: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8cmFuZG9tJTIwcGVvcGxlfGVufDB8fDB8fHww',
      position: 'CEO'
    }
  }
}`,...(O=(N=x.parameters)==null?void 0:N.docs)==null?void 0:O.source}}};const ge=["Default","Draggable","AdditionalInfo"];export{x as AdditionalInfo,y as Default,I as Draggable,ge as __namedExportsOrder,pe as default};
