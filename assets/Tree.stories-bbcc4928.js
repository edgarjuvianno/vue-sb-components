import{e as N,s as L,o as n,g as r,n as y,k as g,f as c,l as v,m,j as d,F as C,D as R,q as P}from"./vue.esm-bundler-1a22c5b9.js";import{b as U,c as Y}from"./icons-69f7cd3d.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";const E=(e,l)=>l?!!l[String(e.value)]:!1,S=e=>{const l=[];if(e.children){let t=e.children.flatMap(a=>a.children?[...a.children]:a);const s=()=>t.some(a=>!!a.children);do t=t.flatMap(a=>a.children?[...a.children]:a);while(s());return t}return l},_=N({emits:["deselect","select","expand"],props:{checkBox:{required:!1,type:Boolean},expanded:{required:!1,type:Boolean},item:{required:!0,type:Object},multi:{required:!1,type:Boolean},selected:{required:!1,type:Object}},name:"sb-tree-view-item",data(){return{localExpand:!!this.expanded||!!this.item.expanded}},computed:{iconAngleRight(){return U()},iconCheck(){return Y()}},methods:{handleEmitDeselect(e){this.$emit("deselect",e)},handleEmitExpand(e,l){this.$emit("expand",e,l)},handleEmitSelect(e){this.$emit("select",e)},handleCheck(e){if(e.children){const l=this.isAllChecked(e),t=S(e);l?this.handleEmitDeselect(t):this.handleEmitSelect(t)}},handleClick(e){E(e,this.selected)?this.handleEmitDeselect(e):this.handleEmitSelect(e)},isAllChecked(e){return e.children?S(e).every(s=>this.selected&&!!this.selected[s.value]):!1},isPartialChecked(e){return e.children?S(e).some(s=>this.selected&&!!this.selected[s.value])&&!this.isAllChecked(e):!1},isSelected(e){return E(e,this.selected)},toggleExpand(e){this.handleEmitExpand(e,!this.localExpand),this.localExpand=!this.localExpand}}}),K={key:0,class:"check"},z=["innerHTML"],G={key:0,class:"check"},J={key:1},Q=["innerHTML"];function W(e,l,t,s,a,i){const o=L("sb-tree-view-item");return n(),r("li",{class:y(["tree-view-item",{expanded:e.item.children&&e.localExpand,"has-child":e.item.children}])},[e.item.children?(n(),r(C,{key:1},[d("div",{class:"label-wrapper",onClick:l[3]||(l[3]=()=>e.checkBox&&e.multi?e.handleCheck(e.item):e.toggleExpand(e.item))},[(n(),c(v(e.iconAngleRight),{onClick:l[2]||(l[2]=g(()=>e.toggleExpand(e.item),["stop"]))})),e.checkBox&&e.multi?(n(),r("div",{key:0,class:y(["check-wrapper",{"all-checked":e.isAllChecked(e.item)}])},[e.isAllChecked(e.item)?(n(),r("span",G,[(n(),c(v(e.iconCheck)))])):e.isPartialChecked(e.item)?(n(),r("span",J,"-")):m("",!0)],2)):m("",!0),d("label",{innerHTML:e.item.label},null,8,Q)]),d("ul",null,[(n(!0),r(C,null,R(e.item.children,(h,b)=>(n(),c(o,{"check-box":e.checkBox,expanded:h.children&&!!e.expanded,item:h,key:`item-${b}`,multi:e.multi,selected:e.selected,onDeselect:e.handleEmitDeselect,onExpand:e.handleEmitExpand,onSelect:e.handleEmitSelect},null,8,["check-box","expanded","item","multi","selected","onDeselect","onExpand","onSelect"]))),128))])],64)):(n(),r("div",{key:0,class:y(["label-wrapper",{selected:e.isSelected(e.item)}])},[e.checkBox?(n(),r("div",{key:0,class:"check-wrapper",onClick:l[0]||(l[0]=g(()=>e.handleClick(e.item),["stop"]))},[e.isSelected(e.item)?(n(),r("span",K,[(n(),c(v(e.iconCheck)))])):m("",!0)])):m("",!0),d("label",{onClick:l[1]||(l[1]=g(()=>e.handleClick(e.item),["stop"])),innerHTML:e.item.label},null,8,z)],2))],2)}const X=H(_,[["render",W]]);_.__docgenInfo={displayName:"sb-tree-view-item",exportName:"default",description:"",tags:{},props:[{name:"checkBox",type:{name:"boolean"},required:!1},{name:"expanded",type:{name:"boolean"},required:!1},{name:"item",type:{name:"ITreeItem"},required:!0},{name:"multi",type:{name:"boolean"},required:!1},{name:"selected",type:{name:"Record<any, ITreeItem>"},required:!1}],events:[{name:"deselect",type:{names:["undefined"]}},{name:"select",type:{names:["undefined"]}},{name:"expand",type:{names:["undefined"]},properties:[{type:{names:["undefined"]},name:"<anonymous1>"}]}],sourceFiles:["/Users/edgar/Documents/private-projects/vue-component-lib/vue-base-lib-storybook/src/components/tree/__item.vue"]};const F=N({emits:["change","expand"],props:{checkBox:{required:!1,type:Boolean},expanded:{required:!1,type:Boolean},list:{required:!0,type:Object},multi:{required:!1,type:Boolean},selected:{required:!1,type:Object}},name:"sb-tree-view",components:{"sb-tree-item":X},data(){return{localSelected:{}}},methods:{handleChange(){this.multi?this.$emit("change",Object.values(this.localSelected)):this.$emit("change",Object.values(this.localSelected)[0]||null)},handleDeselect(e){const l={...this.localSelected};if(Array.isArray(e)){const t=Object.keys({...this.localSelected}),s=e.map(i=>String(i.value)),a=t.filter(i=>s.indexOf(i)<0);this.localSelected=a.reduce((i,o)=>({...i,[o]:l[o]}),{})}else l[e.value]&&delete l[e.value],this.localSelected={...l};this.$nextTick(()=>{this.handleChange()})},handleItemExpand(e,l){this.$emit("expand",e,l)},handleSelect(e){if(Array.isArray(e)){const l=[...Object.values(this.localSelected),...e];this.localSelected=l.reduce((t,s)=>({...t,[s.value]:s}),{})}else this.multi?this.localSelected={...this.localSelected,[e.value]:e}:this.localSelected={[e.value]:e};this.$nextTick(()=>{this.handleChange()})}},watch:{selected:{deep:!0,handler(e){if(e)if(Array.isArray(e)){const l={};e.forEach(t=>{l[t.value]=t}),this.localSelected={...l}}else this.localSelected={[e.value]:e};else this.localSelected={}},immediate:!0}}});function Z(e,l,t,s,a,i){const o=L("sb-tree-item");return n(),r("div",P({class:"tree-view"},{...e.$attrs}),[d("ul",null,[(n(!0),r(C,null,R(e.list,(h,b)=>(n(),c(o,{"check-box":e.checkBox,expanded:e.expanded,item:h,key:`item-${b}`,multi:e.multi,selected:e.localSelected,onDeselect:e.handleDeselect,onExpand:e.handleItemExpand,onSelect:e.handleSelect},null,8,["check-box","expanded","item","multi","selected","onDeselect","onExpand","onSelect"]))),128))])],16)}const V=H(F,[["render",Z]]);F.__docgenInfo={displayName:"sb-tree-view",exportName:"default",description:"",tags:{},props:[{name:"checkBox",type:{name:"boolean"},required:!1},{name:"expanded",type:{name:"boolean"},required:!1},{name:"list",type:{name:"ITreeItem[]"},required:!0},{name:"multi",type:{name:"boolean"},required:!1},{name:"selected",type:{name:"ITreeItem[] | ITreeItem"},required:!1}],events:[{name:"change",type:{names:["undefined"]}},{name:"expand",type:{names:["undefined"]},properties:[{type:{names:["undefined"]},name:"<anonymous1>"}]}],sourceFiles:["/Users/edgar/Documents/private-projects/vue-component-lib/vue-base-lib-storybook/src/components/tree/tree.vue"]};const{UPDATE_STORY_ARGS:ee}=__STORYBOOK_MODULE_CORE_EVENTS__,se={title:"Components/Tree",component:V,tags:["autodocs"],argTypes:{change:{action:"change",control:!1,description:"Tree will fire this event when user select items"},checkBox:{control:"boolean",description:"Show Check Box on each item"},expand:{action:"change",control:!1,description:"Tree will fire this event when Tree items expanded"},expanded:{control:"boolean",description:"Expand/Collapse Tree items"},list:{control:"object",description:"Tree items"},multi:{control:"boolean",description:"Multiple select Tree item"},selected:{control:"object",description:"Selected Tree items"}},args:{list:[{label:"My Tree",children:[{label:"hello",value:1},{label:"wat",value:2},{label:"child folder",children:[{label:"child folder",children:[{label:"hello",value:3},{label:"wat",value:4}]},{label:"hello",value:5},{label:"wat",value:6},{label:"child folder",children:[{label:"hello",value:7},{label:"wat",value:8}]}]}]},{label:"yolo",value:9}],selected:null},decorators:[(e,l)=>(delete l.args.change,l.args.onChange=t=>{window.__STORYBOOK_ADDONS_CHANNEL__.emit(ee,{storyId:l.id,updatedArgs:{selected:t}})},e())]},p={args:{}},u={args:{multi:!0}},f={args:{checkBox:!0}},k={args:{checkBox:!0,multi:!0}};var B,T,w;p.parameters={...p.parameters,docs:{...(B=p.parameters)==null?void 0:B.docs,source:{originalSource:`{
  args: {}
}`,...(w=(T=p.parameters)==null?void 0:T.docs)==null?void 0:w.source}}};var O,q,x;u.parameters={...u.parameters,docs:{...(O=u.parameters)==null?void 0:O.docs,source:{originalSource:`{
  args: {
    multi: true
  }
}`,...(x=(q=u.parameters)==null?void 0:q.docs)==null?void 0:x.source}}};var $,D,A;f.parameters={...f.parameters,docs:{...($=f.parameters)==null?void 0:$.docs,source:{originalSource:`{
  args: {
    checkBox: true
  }
}`,...(A=(D=f.parameters)==null?void 0:D.docs)==null?void 0:A.source}}};var I,M,j;k.parameters={...k.parameters,docs:{...(I=k.parameters)==null?void 0:I.docs,source:{originalSource:`{
  args: {
    checkBox: true,
    multi: true
  }
}`,...(j=(M=k.parameters)==null?void 0:M.docs)==null?void 0:j.source}}};const ae=["Default","MultiSelect","CheckBox","MultiCheckBox"];export{f as CheckBox,p as Default,k as MultiCheckBox,u as MultiSelect,ae as __namedExportsOrder,se as default};
